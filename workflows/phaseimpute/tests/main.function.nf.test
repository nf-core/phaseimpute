
nextflow_function {

    name "Test Functions"
    script "../main.nf"
    tag 'workflows'
    tag 'phaseimpute'

    test("Test Function export_csv") {

        function "export_csv"

        when {
            params {
                outdir = "results"
            }
            function {
                """
                // define inputs of the function here. Example:
                input[0] = Channel.of( [ [id:'test'], file('vcf/test.vcf'), file('index/test.vcf.idx') ] )
                input[1] = ["id"]
                input[2] = [1:"vcf",2:"index"]
                input[3] = "id,vcf,index"
                input[4] = "impute.csv"
                input[5] = "imputation/csv"
                """
            }
        }

        then {
            assertAll(
                { assert function.success },
                { assert snapshot(function.result).match() }
            )
        }
    }
}
